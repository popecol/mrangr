<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Mechanistic Metacommunity Simulator • mrangr</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Mechanistic Metacommunity Simulator">
<meta name="description" content="Flexible, mechanistic, and spatially explicit simulator of metacommunities. It extends our previous package - rangr (see &lt;https://github.com/ropensci/rangr&gt;), which implemented a mechanistic virtual species simulator integrating population dynamics and dispersal. The mrangr package adds the ability to simulate multiple species interacting through an asymmetric matrix of pairwise relationships, allowing users to model all types of biotic interactions — competitive, facilitative, or neutral — within spatially explicit virtual environments.">
<meta property="og:description" content="Flexible, mechanistic, and spatially explicit simulator of metacommunities. It extends our previous package - rangr (see &lt;https://github.com/ropensci/rangr&gt;), which implemented a mechanistic virtual species simulator integrating population dynamics and dispersal. The mrangr package adds the ability to simulate multiple species interacting through an asymmetric matrix of pairwise relationships, allowing users to model all types of biotic interactions — competitive, facilitative, or neutral — within spatially explicit virtual environments.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">mrangr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/mrangr.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/popecol/mrangr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="mrangr">mrangr<a class="anchor" aria-label="anchor" href="#mrangr"></a>
</h1></div>
<!-- badges: start -->

<p>The <strong>mrangr</strong> package is designed to simulate metacommunities within a <strong>spatially explicit, mechanistic framework</strong>. It extends the functionality of the <a href="https://github.com/ropensci/rangr" class="external-link"><code>rangr</code></a> package by allowing for the simulation of <strong>multiple interacting species</strong> via an asymmetric interaction matrix.</p>
<p>This tool mimics the essential processes shaping metacommunity dynamics: local population growth, dispersal, and interspecific interactions. Simulations take place in dynamic environments, facilitating projections of community shifts in response to environmental changes.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install <strong>mrangr</strong> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"mrangr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="basic-workflow">Basic Workflow<a class="anchor" aria-label="anchor" href="#basic-workflow"></a>
</h2>
<p>The <code>mrangr</code> workflow involves initialising a community with spatial data and interaction parameters, running the simulation, and analysing the results.</p>
<div class="section level3">
<h3 id="id_1-input-maps-and-interactions">1. Input Maps and Interactions<a class="anchor" aria-label="anchor" href="#id_1-input-maps-and-interactions"></a>
</h3>
<p>You must provide carrying capacity maps (<code>K_map</code>) and initial abundance maps (<code>n1_map</code>) as <code>SpatRaster</code> objects. For a community of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>N</mi><annotation encoding="application/x-tex">N</annotation></semantics></math> species, the rasters must contain <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>N</mi><annotation encoding="application/x-tex">N</annotation></semantics></math> layers.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load example maps</span></span>
<span><span class="va">K_map</span> <span class="op">&lt;-</span> <span class="fu">rast</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"input_maps/K_map_eg.tif"</span>, package <span class="op">=</span> <span class="st">"mrangr"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">K_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">K_map</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p>Interspecific interactions are defined using an <strong>interaction matrix</strong> (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>a</mi><annotation encoding="application/x-tex">a</annotation></semantics></math>), where values represent the per-capita interaction strength of the species in the column on the species in the row.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example for 2 species with symmetric competition</span></span>
<span><span class="va">nspec</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="op">-</span><span class="fl">0.8</span>, <span class="op">-</span><span class="fl">0.8</span>, <span class="cn">NA</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="va">nspec</span>, ncol <span class="op">=</span> <span class="va">nspec</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_2-community-initialisation">2. Community Initialisation<a class="anchor" aria-label="anchor" href="#id_2-community-initialisation"></a>
</h3>
<p>Use <code><a href="reference/initialise_com.html">initialise_com()</a></code> to create a <code>sim_com_data</code> object. This stores all parameters, including the intrinsic growth rate (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>r</mi><annotation encoding="application/x-tex">r</annotation></semantics></math>) and the dispersal rate.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">first_com</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/initialise_com.html">initialise_com</a></span><span class="op">(</span></span>
<span>  n1_map <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">K_map</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span>, </span>
<span>  K_map <span class="op">=</span> <span class="va">K_map</span>, </span>
<span>  r <span class="op">=</span> <span class="fl">1.1</span>, </span>
<span>  a <span class="op">=</span> <span class="va">a</span>, </span>
<span>  rate <span class="op">=</span> <span class="fl">1</span> <span class="op">/</span> <span class="fl">500</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_3-running-the-simulation">3. Running the Simulation<a class="anchor" aria-label="anchor" href="#id_3-running-the-simulation"></a>
</h3>
<p>The <code><a href="reference/sim_com.html">sim_com()</a></code> function executes the simulation over a specified number of time steps.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">first_sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sim_com.html">sim_com</a></span><span class="op">(</span><span class="va">first_com</span>, time <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_4-visualisation">4. Visualisation<a class="anchor" aria-label="anchor" href="#id_4-visualisation"></a>
</h3>
<p>You can visualise the final spatial distributions or the change in mean abundance over time.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Visualise spatial niches at specific time steps</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">first_sim</span>, time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">100</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-vis-1.png" alt="" width="100%"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot abundance time series for all species</span></span>
<span><span class="fu"><a href="reference/plot_series.html">plot_series</a></span><span class="op">(</span><span class="va">first_sim</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-vis-2.png" alt="" width="100%"></p>
</div>
</div>
<div class="section level2">
<h2 id="virtual-ecologist">Virtual Ecologist<a class="anchor" aria-label="anchor" href="#virtual-ecologist"></a>
</h2>
<p>The package includes a <code><a href="reference/virtual_ecologist.html">virtual_ecologist()</a></code> function to simulate real-world observation processes. This allows users to sample the simulated community at defined points in space and time, incorporating sampling effort and detection probability into the simulation.</p>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>To cite <strong>mrangr</strong>, please use the <code><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation()</a></code> function:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://popecol.github.io/mrangr/">mrangr</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation</a></span><span class="op">(</span><span class="st">"mrangr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="funding">Funding<a class="anchor" aria-label="anchor" href="#funding"></a>
</h2>
<p>This work was supported by the National Science Centre, Poland, grant no. 2018/29/B/NZ8/00066 and the Poznań Supercomputing and Networking Centre (grant no. pl0090-01).</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=mrangr" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/popecol/mrangr/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/popecol/mrangr/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing mrangr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Katarzyna Markowska <br><small class="roles"> Author, maintainer, copyright holder </small>   </li>
<li>Lechosław Kuczyński <br><small class="roles"> Author, copyright holder </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=mrangr" class="external-link"><img src="https://www.r-pkg.org/badges/version/mrangr?color=green" alt="CRAN release"></a></li>
<li><a href="https://doi.org/10.5281/zenodo.18641951" class="external-link"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.18641951.svg" alt="DOI"></a></li>
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://github.com/popecol/mrangr/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/popecol/mrangr/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://codecov.io/github/popecol/mrangr" class="external-link"><img src="https://codecov.io/github/popecol/mrangr/graph/badge.svg?token=LF3PYFLBDN" alt="codecov"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Katarzyna Markowska, Lechosław Kuczyński.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
