<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Flexible, mechanistic, and spatially explicit simulator of
    metacommunities. It extends our previous package - rangr (see
    &lt;https://github.com/ropensci/rangr&gt;), which implemented a mechanistic
    virtual species simulator integrating population dynamics and
    dispersal. The mrangr package adds the ability to simulate multiple
    species interacting through an asymmetric matrix of pairwise
    relationships, allowing users to model all types of biotic
    interactions — competitive, facilitative, or neutral — within
    spatially explicit virtual environments.">
<title>Mechanistic Metacommunity Simulator • mrangr</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Mechanistic Metacommunity Simulator">
<meta property="og:description" content="Flexible, mechanistic, and spatially explicit simulator of
    metacommunities. It extends our previous package - rangr (see
    &lt;https://github.com/ropensci/rangr&gt;), which implemented a mechanistic
    virtual species simulator integrating population dynamics and
    dispersal. The mrangr package adds the ability to simulate multiple
    species interacting through an asymmetric matrix of pairwise
    relationships, allowing users to model all types of biotic
    interactions — competitive, facilitative, or neutral — within
    spatially explicit virtual environments.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">mrangr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="articles/mrangr.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/popecol/mrangr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="mrangr">mrangr<a class="anchor" aria-label="anchor" href="#mrangr"></a>
</h1></div>
<!-- badges: start -->

<p>The <strong>mrangr</strong> package is designed to simulate metacommunities within a <strong>spatially explicit, mechanistic framework</strong>. It extends the functionality of the <a href="https://github.com/ropensci/rangr" class="external-link"><code>rangr</code></a> package by allowing for the simulation of <strong>multiple interacting species</strong> via an asymmetric interaction matrix.</p>
<p>This tool mimics the essential processes shaping metacommunity dynamics: local population growth, dispersal, and interspecific interactions. Simulations take place in dynamic environments, facilitating projections of community shifts in response to environmental changes.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install <strong>mrangr</strong> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"mrangr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="basic-workflow">Basic Workflow<a class="anchor" aria-label="anchor" href="#basic-workflow"></a>
</h2>
<p>The <code>mrangr</code> workflow involves initialising a community with spatial data and interaction parameters, running the simulation, and analysing the results.</p>
<div class="section level3">
<h3 id="id_1-input-maps-and-interactions">1. Input Maps and Interactions<a class="anchor" aria-label="anchor" href="#id_1-input-maps-and-interactions"></a>
</h3>
<p>You must provide carrying capacity maps (<code>K_map</code>) and initial abundance maps (<code>n1_map</code>) as <code>SpatRaster</code> objects. For a community of <span class="math inline"><em>N</em></span> species, the rasters must contain <span class="math inline"><em>N</em></span> layers.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load example maps</span></span>
<span><span class="va">K_map</span> <span class="op">&lt;-</span> <span class="fu">rast</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"input_maps/K_map_eg.tif"</span>, package <span class="op">=</span> <span class="st">"mrangr"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">K_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">K_map</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p>Interspecific interactions are defined using an <strong>interaction matrix</strong> (<span class="math inline"><em>a</em></span>), where values represent the per-capita interaction strength of the species in the column on the species in the row.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example for 2 species with symmetric competition</span></span>
<span><span class="va">nspec</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="op">-</span><span class="fl">0.8</span>, <span class="op">-</span><span class="fl">0.8</span>, <span class="cn">NA</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="va">nspec</span>, ncol <span class="op">=</span> <span class="va">nspec</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_2-community-initialisation">2. Community Initialisation<a class="anchor" aria-label="anchor" href="#id_2-community-initialisation"></a>
</h3>
<p>Use <code><a href="reference/initialise_com.html">initialise_com()</a></code> to create a <code>sim_com_data</code> object. This stores all parameters, including the intrinsic growth rate (<span class="math inline"><em>r</em></span>) and the dispersal rate.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">first_com</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/initialise_com.html">initialise_com</a></span><span class="op">(</span></span>
<span>  n1_map <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">K_map</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span>, </span>
<span>  K_map <span class="op">=</span> <span class="va">K_map</span>, </span>
<span>  r <span class="op">=</span> <span class="fl">1.1</span>, </span>
<span>  a <span class="op">=</span> <span class="va">a</span>, </span>
<span>  rate <span class="op">=</span> <span class="fl">1</span> <span class="op">/</span> <span class="fl">500</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_3-running-the-simulation">3. Running the Simulation<a class="anchor" aria-label="anchor" href="#id_3-running-the-simulation"></a>
</h3>
<p>The <code><a href="reference/sim_com.html">sim_com()</a></code> function executes the simulation over a specified number of time steps.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">first_sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sim_com.html">sim_com</a></span><span class="op">(</span><span class="va">first_com</span>, time <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_4-visualisation">4. Visualisation<a class="anchor" aria-label="anchor" href="#id_4-visualisation"></a>
</h3>
<p>You can visualise the final spatial distributions or the change in mean abundance over time.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Visualise spatial niches at specific time steps</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">first_sim</span>, time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">100</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-vis-1.png" width="100%"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot abundance time series for all species</span></span>
<span><span class="fu"><a href="reference/plot_series.html">plot_series</a></span><span class="op">(</span><span class="va">first_sim</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-vis-2.png" width="100%"></p>
</div>
</div>
<div class="section level2">
<h2 id="virtual-ecologist">Virtual Ecologist<a class="anchor" aria-label="anchor" href="#virtual-ecologist"></a>
</h2>
<p>The package includes a <code><a href="reference/virtual_ecologist.html">virtual_ecologist()</a></code> function to simulate real-world observation processes. This allows users to sample the simulated community at defined points in space and time, incorporating sampling effort and detection probability into the simulation.</p>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>To cite <strong>mrangr</strong>, please use the <code><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation()</a></code> function:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://popecol.github.io/mrangr/">mrangr</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation</a></span><span class="op">(</span><span class="st">"mrangr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="funding">Funding<a class="anchor" aria-label="anchor" href="#funding"></a>
</h2>
<p>This work was supported by the National Science Centre, Poland, grant no. 2018/29/B/NZ8/00066 and the Poznań Supercomputing and Networking Centre (grant no. pl0090-01).</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=mrangr" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/popecol/mrangr/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/popecol/mrangr/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing mrangr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Katarzyna Markowska <br><small class="roles"> Author, maintainer, copyright holder </small>  </li>
<li>Lechosław Kuczyński <br><small class="roles"> Author, copyright holder </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=mrangr" class="external-link"><img src="https://www.r-pkg.org/badges/version/mrangr?color=green" alt="CRAN release"></a></li>
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://github.com/popecol/mrangr/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/popecol/mrangr/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://codecov.io/github/popecol/mrangr" class="external-link"><img src="https://codecov.io/github/popecol/mrangr/graph/badge.svg?token=LF3PYFLBDN" alt="codecov"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Katarzyna Markowska, Lechosław Kuczyński.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
